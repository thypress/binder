<!-- SPDX-License-Identifier: MPL-2.0

This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at https://mozilla.org/MPL/2.0/.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{title}}</title>
  <meta name="description" content="{{description}}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="{{title}}">
  <meta property="og:description" content="{{description}}">
  <meta property="og:url" content="{{siteUrl}}/post/{{slug}}/">
  {{#if ogImage}}
  <meta property="og:image" content="{{siteUrl}}{{ogImage}}">
  {{/if}}
  <meta property="og:site_name" content="{{siteTitle}}">
  <meta property="article:published_time" content="{{createdAtISO}}">
  <meta property="article:modified_time" content="{{updatedAtISO}}">
  {{#if author}}
  <meta property="article:author" content="{{author}}">
  {{/if}}

  <!-- Twitter -->
  <meta name="twitter:card" content="{{#if ogImage}}summary_large_image{{else}}summary{{/if}}">
  <meta name="twitter:title" content="{{title}}">
  <meta name="twitter:description" content="{{description}}">
  {{#if ogImage}}
  <meta name="twitter:image" content="{{siteUrl}}{{ogImage}}">
  {{/if}}

  <!-- SEO -->
  <link rel="canonical" href="{{siteUrl}}/post/{{slug}}/">
  {{#if author}}
  <meta name="author" content="{{author}}">
  {{/if}}

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{title}}",
  "description": "{{description}}",
  "datePublished": "{{createdAtISO}}",
  "dateModified": "{{updatedAtISO}}",{{#if wordCount}}
  "wordCount": {{wordCount}},{{/if}}{{#if readingTime}}
  "timeRequired": "PT{{readingTime}}M",{{/if}}
  "author": {
    "@type": "Person",
    "name": "{{author}}"
  },{{#if ogImage}}
  "image": "{{siteUrl}}{{ogImage}}",{{/if}}
  "publisher": {
    "@type": "Organization",
    "name": "{{siteTitle}}",
    "url": "{{siteUrl}}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{siteUrl}}/post/{{slug}}/"
  }
}
  </script>

  <link rel="stylesheet" href="/assets/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
</head>
<body>
  {{#if navigation}}
  <aside>
    <h2>Navigation</h2>
    <nav>
      {{{navigationTree navigation}}}
    </nav>
  </aside>
  {{/if}}

  <main>
    <p><a href="/">Back</a></p>
    <hr>

    <!--<h1>{{title}}</h1>-->

    <div class="meta">
      {{createdAt}}{{#if readingTime}} · {{readingTime}} min read{{/if}}{{#if wordCount}} · {{wordCount}} words{{/if}}
      {{#unless (eq createdAt updatedAt)}}
       · Updated: {{updatedAt}}
      {{/unless}}
      {{#if tags}}
      <span class="tags">
        {{#each tags}}<a href="/tag/{{this}}/">{{this}}</a>{{/each}}
      </span>
      {{/if}}
    </div>

    <article>
      {{{content}}}
    </article>

    {{#if prevPost}}{{#if nextPost}}
    <nav class="post-nav">
      {{#if prevPost}}
        <div class="post-nav-prev">
          <a href="/post/{{prevPost.slug}}/">← {{prevPost.title}}</a>
        </div>
      {{/if}}
      {{#if nextPost}}
        <div class="post-nav-next">
          <a href="/post/{{nextPost.slug}}/">{{nextPost.title}} →</a>
        </div>
      {{/if}}
    </nav>
    {{/if}}{{/if}}
  </main>
</body>
</html>
