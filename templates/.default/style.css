/* assets/style.css */
/* SPDX-License-Identifier: MPL-2.0
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

/* ===== Tokens ===== */
:root{
    --font: sans-serif;
  /*--font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;*/

  --bg: #f9f9f9;
  --surface: #ffffff;

  --text: #2a2a2a;
  --muted: #666;
  --muted-2: #999;

  --border: #ddd;

  --accent: #1d7484;
  --accent-2: #982c61;

  --radius: 8px;

  --sidebar-w: 250px;
  --sidebar-w-max: 300px;
  --content-max: 900px;

  --pad-x: 2rem;
  --pad-y: 1.5rem;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #0f1115;
    --surface: #151922;

    --text: #e7e7e7;
    --muted: #b5b5b5;
    --muted-2: #8a8a8a;

    --border: #2a2f3a;

    --accent: #6fd3e3;
    --accent-2: #ff7ab6;
  }
}

/* manual override */
html[data-theme="light"]{
  --bg: #f9f9f9;
  --surface: #ffffff;
  --text: #2a2a2a;
  --muted: #666;
  --muted-2: #999;
  --border: #ddd;
  --accent: #1d7484;
  --accent-2: #982c61;

  .hljs {background: var(--bg);}
}
html[data-theme="dark"]{
  --bg: #0f1115;
  --surface: #151922;
  --text: #e7e7e7;
  --muted: #b5b5b5;
  --muted-2: #8a8a8a;
  --border: #2a2f3a;
  --accent: #6fd3e3;
  --accent-2: #ff7ab6;
}

/* ===== Base ===== */
html{ font-family: var(--font); background: var(--bg); color: var(--text); }
body{
  margin: 0;
  line-height: 1.618;
  color: var(--text);
  background: var(--bg);
  display: flex;
  gap: 0;
}

h1,h2,h3,h4,h5,h6{
  line-height: 1.2;
  font-weight: 700;
  color: var(--text);
  scroll-margin-top: 2rem;
}
h1{ font-size: 2.2em; }
h2{ font-size: 1.8em; }
h3{ font-size: 1.5em; }

a{ color: var(--accent); text-decoration: none; }
a:hover{ color: var(--accent-2); text-decoration: underline; }

hr{
    border: 0;
    /*border-top: 1px solid var(--border);*/
}

/* ===== Layout ===== */
main{
  flex: 1;
  padding: 0 var(--pad-x);
  background: var(--surface);
  min-width: 0;
  /*max-width: var(--content-max);*/
}

@media (max-width: 1024px){
  body{ flex-direction: column; }
  main{ max-width: 100%; padding: 0 1.5rem; }
}

/* ===== Tools (Search + Theme) ===== */
.page-tools{
  display: flex;
  justify-content: flex-end;
  gap: .5rem;
  padding: 1rem 0 .25rem;
}

.tool-button{
  /*border: 1px solid var(--border);*/
  border: none;
  background: transparent;
  color: var(--text);
  border-radius: var(--radius);
  padding: .45rem .7rem;
  font: inherit;
  cursor: pointer;
}

.tool-button:hover{ background: var(--bg); text-decoration: none; }

.tool-kbd{
  margin-left: .5rem;
  font-size: .85em;
  color: var(--muted-2);
}

/* ===== Left Sidebar - Navigation ===== */
.sidebar-nav{
  width: var(--sidebar-w);
  min-width: var(--sidebar-w);
  padding: 0 1rem;
  background: var(--surface);
  /*border-right: 1px solid var(--border);*/
  overflow-y: auto;
  position: sticky;
  top: 0;
  height: 100vh;
}

.sidebar-nav-top{
  display:flex;
  gap:.5rem;
  align-items:center;
  justify-content:space-between;
  padding:1rem 0 .5rem;
  position: sticky;
  top: 0;
  background: var(--surface);
}
.sidebar-nav-top .tool-button{ width: 100%; }
.sidebar-nav-top #theme-toggle{ width:auto; flex:0 0 auto; }

.sidebar-nav details{ margin: .5rem 0; }
.sidebar-nav summary{
  cursor: pointer;
  padding: .35rem 0;
  font-weight: 600;
  user-select: none;
}

.sidebar-nav ul{ list-style: none; padding-left: 1rem; margin: .35rem 0; }

@media (max-width: 1024px){
  .sidebar-nav{
    width: 100%;
    height: auto;
    position: static;
    border-right: 0;
    /*border-bottom: 1px solid var(--border);*/
  }
}

/* ===== Right Sidebar - TOC ===== */
.sidebar-toc{
  width: var(--sidebar-w-max);
  min-width: var(--sidebar-w);
  padding: 0 1rem;
  background: var(--surface);
  /*border-left: 1px solid var(--border);*/
  overflow-y: auto;
  position: sticky;
  top: 0;
  height: 100vh;
}

.sidebar-toc h2{
  font-size: 1rem;
  margin: 2rem 0;
}

.sidebar-toc .toc{ font-size: .9rem; }
.sidebar-toc .toc ul{ list-style: none; padding-left: 0; margin: 0; }
.sidebar-toc .toc ul ul{ padding-left: 1rem; }
/* TOC links */
.sidebar-toc .toc a{
  display: block;
  padding: .25rem .4rem;
  color: var(--muted);
  text-decoration: none;
  border-left: 2px solid transparent;
  background: transparent;
  transition: color .15s ease, background-color .15s ease, border-left-color .15s ease;
}

/* Hover: color only (NO background), and DO NOT override active */
.sidebar-toc .toc a:not(.active):hover{
  color: var(--accent);
  /*background: transparent;*/
}

/* Active: always keep background + border (even while hovered) */
.sidebar-toc .toc a.active{
  color: var(--accent);
  border-left-color: var(--accent);
  /*background: var(--bg);*/
  font-weight: inherit;
}
.sidebar-toc .toc a.active:hover{
  background: var(--bg);
}

/* Optional: stronger active background if you want it more obvious */
.sidebar-toc .toc a.active{
  /* background: color-mix(in srgb, var(--accent) 10%, var(--surface)); */
}

/* Keep click/focus from "painting" the link */
/*.sidebar-toc .toc a:focus{ background: transparent; }*/
.sidebar-toc .toc a:focus-visible{
  /*outline: 2px solid var(--accent);*/
  outline-offset: 2px;
  border-radius: 6px;
}

.sidebar-toc .toc summary{ display: none; }

@media (max-width: 1024px){
  .sidebar-toc{ display: none; }
}

/* ===== Post listing ===== */
.posts{ list-style: none; padding: 0; margin: 1.5rem 0; }
.posts li{
    padding: 1rem 0;
    /*border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);*/
}
.posts li:last-child{ border-bottom: 0; }
.posts h3{ margin: 0 0 .35rem; font-size: 1.3rem; }
.meta{ color: var(--muted-2); margin: .35rem 0; }
.description{ color: var(--muted); margin: .35rem 0; }

/* ===== Tags / Categories / Series ===== */
.tags, .categories, .series{
  display: inline-flex;
  flex-wrap: wrap;
  gap: .35rem;
  margin-left: .5rem;
}
.tags a, .categories a, .series a{
  display: inline-block;
  padding: 0 .5rem;
  /*border: 1px solid var(--border);*/
  border-radius: 999px;
  font-size: .85rem;
  color: var(--muted);
}
.tags a:hover, .categories a:hover, .series a:hover{
  background: var(--accent);
  color: var(--surface);
  border-color: var(--accent);
  text-decoration: none;
}

/* ===== Search (used inside dialog) ===== */
.search-box input{
  width: 100%;
  padding: .7rem;
  font-size: 1rem;
  /*border: 1px solid var(--border);*/
  border: none;
  border-radius: var(--radius);
  box-sizing: border-box;
  font-family: var(--font);
  background: var(--surface);
  color: var(--text);
}

.search-box input:focus{ border-color: var(--accent); outline: none; }

.search-results{
  display: none;
  margin-top: .75rem;
  /*border: 1px solid var(--border);*/
  border-radius: var(--radius);
  padding: 1rem;
  background: var(--surface);
  max-height: 55vh;
  overflow-y: auto;
}

.search-result{
    padding: .75rem 0;
    /*border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);*/
}
.search-result:last-child{ border-bottom: 0; }
.search-result h4{ margin: 0 0 .35rem; }

/* ===== Search dialog overlay ===== */
.search-dialog{
  border: 0;
  padding: 0;
  width: min(760px, calc(100% - 2rem));
  border-radius: var(--radius);
  background: var(--surface);
  color: var(--text);
  box-shadow: 0 12px 48px rgba(0,0,0,.22);
}

.search-dialog::backdrop{
    /*background: rgba(0,0,0,.55);*/
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
}

.search-dialog-inner{ padding: 1rem; }

.search-dialog-top{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: .75rem;
}

.search-dialog-title{ font-size: 1rem; color: var(--muted); }

.search-close{
  /*border: 1px solid var(--border);*/
  border: none;
  background: transparent;
  color: var(--text);
  border-radius: var(--radius);
  padding: .25rem .6rem;
  font: inherit;
  cursor: pointer;
}
.search-close:hover{ background: var(--bg); }

/* ===== Pagination ===== */
.pagination{ text-align: center; margin: 1.5rem 0; }
.pagination a, .pagination strong, .pagination span{ display: inline-block; padding: .4rem .65rem; margin: 0 .15rem; }
.pagination strong{ color: var(--accent); }

/* ===== Post navigation (prev/next) ===== */
.post-nav{
  display: flex;
  justify-content: space-between;
  margin: 2rem 0 1.5rem;
  padding-top: 1.5rem;
  /*border-top: 1px solid var(--border);*/
  gap: 1rem;
}
.post-nav-prev, .post-nav-next{ flex: 1; }
.post-nav-next{ text-align: right; }
.post-nav a{
  display: block;
  padding: .9rem;
  /*border: 1px solid var(--border);*/
  border-radius: var(--radius);
  background: var(--bg);
}
.post-nav a:hover{ border-color: var(--accent); text-decoration: none; }

@media (max-width: 768px){
  .post-nav{ flex-direction: column; }
  .post-nav-next{ text-align: left; }
}

/* ===== Related posts ===== */
.related-posts{
  margin: 2rem 0 1.5rem;
  padding: 1.25rem;
  /*border: 1px solid var(--border);*/
  border-radius: var(--radius);
  background: var(--bg);
}
.related-posts ul{ list-style: none; padding: 0; margin: .75rem 0 0; }
.related-posts li{
    padding: .75rem 0;
    /*border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);*/
}
.related-posts li:last-child{ border-bottom: 0; }

/* ===== Admonitions ===== */
.admonition{
  margin: 1.5rem 0;
  padding: 1rem 1.25rem;
  border-radius: var(--radius);
  /*border-left: 4px solid var(--border);*/
  background: var(--bg);
}
.admonition-title{ font-weight: 700; margin: 0 0 .5rem; }
.admonition-content p{ margin: .5rem 0; }

/* ===== Article content ===== */
article img,
article picture,
article video,
article svg,
article canvas{
  max-width: 100%;
  height: auto;
}

article iframe{
  width: 100%;
  max-width: 100%;
  border: 0;
}

article blockquote{
  margin: 1.5rem 0;
  padding: 1rem 1.25rem;
  border-left: 4px solid var(--accent);
  background: var(--bg);
}

article ul, article ol{ padding-left: 2rem; margin: 1rem 0; }
article li{ margin: .35rem 0; }

article table{
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  display: block;
  overflow-x: auto;
}

article th, article td{
  padding: .6rem .75rem;
  /*border-bottom: 1px solid var(--border);*/
  text-align: left;
  white-space: nowrap;
}

article pre{ margin: 1.5rem 0; }
article pre code{ display: block; padding: 1.25rem; overflow-x: auto; border-radius: var(--radius); }

article code{
  padding: .15rem .35rem;
  background: var(--bg);
  /*border: 1px solid var(--border);*/
  border-radius: 6px;
  font-size: .92rem;
}
